__NUXT_JSONP__("/posts/interesting-tail-call-elimination-problem", (function(a,b,c,d,e,f,g,h,i,j){f[0]="algorithm";f[1]="recursion";f[2]="functional-programming";return {data:[{post:{name:b,title:c,description:d,content:e,tags:f,comment_count:g,allow_comment:a,is_publish:a,read_time:h,id:i,created_at:j}}],fetch:{},mutations:[["post\u002FsetPost",{name:b,title:c,description:d,content:e,tags:f,comment_count:g,allow_comment:a,is_publish:a,read_time:h,id:i,created_at:j}]]}}(true,"interesting-tail-call-elimination-problem","GÃ³c nhÃ¬n khÃ¡c vá» tail call elimination","Má»™t bÃ i toÃ¡n thÃº vá»‹ vá» tá»‘i Æ°u Ä‘á»‡ quy giÃºp tui cÃ³ gÃ³c nhÃ¬n khÃ¡c vá» tail call elimination nhÆ° tháº¿ nÃ o.","\u003Cp\u003ETui thÃ¬ Ä‘Ã³ giá» hay cÃ y rank trÃªn \u003Ca href=\"https:\u002F\u002Fwww.codewars.com\"\u003ECodewars\u003C\u002Fa\u003E, chá»§ yáº¿u lÃ  vÃ¬ giao diá»‡n cá»§a nÃ³ ngáº§u lÃ²i hÆ¡n ba máº¥y web thuáº­t toÃ¡n chÃ¡n ngáº¯t khÃ¡c ğŸ˜„ ChÆ¡i má»™t thá»i gian thÃ¬ tui cÅ©ng lÃªn Ä‘Æ°á»£c 4 kyu vÃ  gáº·p pháº£i bÃ i toÃ¡n nÃ y \u003Ca href=\"https:\u002F\u002Fwww.codewars.com\u002Fkata\u002F57040e445a726387a1001cf7\"\u003EThe fusc function - Part 2\u003C\u002Fa\u003E. BÃ i nÃ y thÃº vá»‹ á»Ÿ chá»—, thay vÃ¬ nhÆ° thÃ´ng thÆ°á»ng há» chá»‰ Ä‘Æ°a mÃ¬nh Ä‘á» bÃ i, thÃ¬ bÃ i nÃ y há» cÃ²n Ä‘Æ°a cho mÃ¬nh má»™t bÃ i khÃ¡c vÃ­ dá»¥ máº«u cho phÆ°Æ¡ng phÃ¡p mÃ  há» muá»‘n mÃ¬nh dÃ¹ng. NÃ³i chung lÃ  giáº£i xong sáº½ há»c Ä‘Æ°á»£c phÆ°Æ¡ng phÃ¡p gÃ¬ Ä‘Ã³ má»›i, chá»‰ tiáº¿c lÃ  tui lÃºc Ä‘Ã³ Ä‘Ã£ quyáº¿t Ä‘á»‹nh gáº­p mÃ¡y Ä‘i ngá»§ ğŸ™‚ Má»›i Ä‘áº§u nÄƒm nay thÃ¬ tui thá»­ má»Ÿ ra lÃ m láº¡i, vÃ  congrats, nÃ£o tui Ä‘Ã£ Ä‘Æ°á»£c thÃ´ng, giá» tui Ä‘i thÃ´ng ngÆ°á»£c láº¡i cho máº¥y báº¡n Ä‘Ã¢y.\u003C\u002Fp\u003E\n\u003Cp\u003ETrong bÃ i viáº¿t nÃ y, tui sáº½ Ä‘i giáº£i quyáº¿t bÃ i toÃ¡n trÃªn trÆ°á»›c, má»¥c tiÃªu bÃ i toÃ¡n lÃ  Ä‘Æ°a tá»« má»™t hÃ m Ä‘á»‡ quy thÃ nh má»™t hÃ m Ä‘á»‡ quy Ä‘uÃ´i (tail call elimination), Ä‘á»«ng lo, tui sáº½ giáº£i thÃ­ch kÄ© hÆ¡n nhá»¯ng thuáº­t ngá»¯ nÃ y á»Ÿ phÃ­a dÆ°á»›i. Sau Ä‘Ã³ tui sáº½ chia sáº» má»™t chÃºt vá» gÃ³c nhÃ¬n cá»§a tui táº¡i sao phÆ°Æ¡ng phÃ¡p cá»§a bÃ i toÃ¡n nÃ y khÃ¡ Ä‘á»™c Ä‘Ã¡o so vá»›i thá»±c táº¿. Okay triá»ƒn thÃ´i nÃ o!\u003C\u002Fp\u003E\n\u003Ch2\u003ENá»™i dung bÃ i toÃ¡n\u003C\u002Fh2\u003E\n\u003Cp\u003EDÃ nh cho nhá»¯ng con ngÆ°á»i chÃ¢y lÆ°á»i khÃ´ng chá»‹u báº¥m vÃ o link Ä‘á»c trÆ°á»›c (á»«a tui Ä‘ang nÃ³i báº¡n Ä‘Ã³) thÃ¬ tui sáº½ trÃ¬nh bÃ y láº¡i bÃ i toÃ¡n á»Ÿ Ä‘Ã¢y luÃ´n, \u003Cdel\u003Echá»© khÃ´ng pháº£i vÃ¬ tui muá»‘n bÃ i mÃ¬nh dÃ i ra Ä‘Ã¢u nha\u003C\u002Fdel\u003E. Vá»›i láº¡i tui cÅ©ng sáº½ lÃ m rÃµ má»™t sá»‘ chá»— mÃ  bÃ i viáº¿t gá»‘c khÃ´ng Ä‘á» cáº­p tá»›i.\u003C\u002Fp\u003E\n\u003Cp\u003ECho hÃ m \u003Cspan class=\"math inline\"\u003E\\(\\operatorname{fusc}(n)\\)\u003C\u002Fspan\u003E Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a nhÆ° sau:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cspan class=\"math display\"\u003E\\[\\begin{cases}\n\\operatorname{fusc}(0) = 0\\\\\n\\operatorname{fusc}(1) = 1\\\\\n\\operatorname{fusc}(2n) = \\operatorname{fusc}(n)\\\\\n\\operatorname{fusc}(2n + 1) = \\operatorname{fusc}(n) + \\operatorname{fusc}(n + 1)\\\\\n\\end{cases}\n\\]\u003C\u002Fspan\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EViá»‡c cá»§a báº¡n lÃ  hÃ£y viáº¿t láº¡i vÃ  tá»‘i Æ°u hÃ m \u003Cspan class=\"math inline\"\u003E\\(\\operatorname{fusc}(n)\\)\u003C\u002Fspan\u003E trÃªn. Nhá»› ráº±ng \u003Cspan class=\"math inline\"\u003E\\(n\\)\u003C\u002Fspan\u003E sáº½ cÃ³ giÃ¡ trá»‹ ráº¥t lá»›n, cá»¥ thá»ƒ thÃ¬ \u003Cspan class=\"math inline\"\u003E\\(n\\)\u003C\u002Fspan\u003E sáº½ lá»›n hÆ¡n 1000 bit (Ä‘á»‘i vá»›i Javascript) vÃ  52 bit (Ä‘á»‘i vá»›i PHP), nÃªn lÃ  cáº§n lÆ°u Ã½ tá»›i váº¥n Ä‘á» stack overflow vÃ  timeouts.\u003C\u002Fp\u003E\n\u003Ch2\u003EGá»£i Ã½ phÆ°Æ¡ng phÃ¡p\u003C\u002Fh2\u003E\n\u003Cblockquote\u003E\nPháº§n nÃ y trong lÃºc Ä‘á»c máº¥y báº¡n khÃ´ng cáº§n quÃ¡ hoang mang nhá»¯ng thá»© nhÆ° lÃ  táº¡i sao pháº£i Ä‘Æ°a hai váº¿ vá» cÃ¹ng dáº¡ng, rá»“i táº¡i sao pháº£i Ä‘áº·t thÃªm biáº¿n a, b cÃ¡c thá»© Ä‘Ã¢u, cá»© Ä‘á»c Ä‘áº¿n cuá»‘i lÃ  má»i thá»© sáº½ trá»Ÿ nÃªn make sense thÃ´i.\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003ETÆ°á»Ÿng tÆ°á»£ng thay vÃ¬ Ä‘á» bÃ i lÃ  hÃ m \u003Cspan class=\"math inline\"\u003E\\(\\operatorname{fusc}(n)\\)\u003C\u002Fspan\u003E mÃ  lÃ  hÃ m \u003Cspan class=\"math inline\"\u003E\\(\\operatorname{fib}(n)\\)\u003C\u002Fspan\u003E (tráº£ vá» \u003Ca href=\"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FFibonacci_number\"\u003Esá»‘ Fibonacci\u003C\u002Fa\u003E thá»© \u003Cspan class=\"math inline\"\u003E\\(n\\)\u003C\u002Fspan\u003E), thÃ¬ lÃºc nÃ y hÃ m Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a nhÆ° sau:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cspan class=\"math display\"\u003E\\[\\begin{cases}\n\\operatorname{fib}(0) = 1 & (1)\\\\\n\\operatorname{fib}(1) = 1 & (2)\\\\\n\\operatorname{fib}(n + 2) = \\operatorname{fib}(n) + \\operatorname{fib}(n + 1)\\quad (n \\geq 0) & (3)\n\\end{cases}\n\\]\u003C\u002Fspan\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ENáº¿u dÃ¹ng trá»±c tiáº¿p Ä‘á»‹nh nghÄ©a trÃªn thÃ¬ khÃ´ng Ä‘Æ°á»£c tá»‘i Æ°u cho láº¯m. DÄ© nhiÃªn báº¡n hoÃ n toÃ n cÃ³ thá»ƒ dÃ¹ng quy hoáº¡ch Ä‘á»™ng, nhÆ°ng lÃ m váº­y thÃ¬ láº¡i tá»‘n thÃªm bá»™ nhá»› khÃ´ng cáº§n thiáº¿t, nÃªn lÃ  chÃºng ta sáº½ cá»‘ thá»­ tÃ¬m Ä‘á»‡ quy Ä‘uÃ´i (\u003Ca href=\"https:\u002F\u002Fwww.geeksforgeeks.org\u002Ftail-recursion\"\u003Etail recursion\u003C\u002Fa\u003E) cho bÃ i toÃ¡n nÃ y.\u003C\u002Fp\u003E\n\u003Cblockquote\u003ELáº¡i lÃ  gÃ³c nhá» cho nhá»¯ng con lÆ°á»i khÃ´ng chá»‹u báº¥m vÃ o Ä‘á»c trÆ°á»›c Ä‘á»‹nh nghÄ©a cá»§a tail recursion Ä‘Ã¢y, thÃ¬ tail recursion lÃ  loáº¡i hÃ m Ä‘á»‡ quy mÃ  viá»‡c gá»i Ä‘á»‡ quy lÃ  Ä‘iá»u cuá»‘i cÃ¹ng hÃ m Ä‘Ã³ thá»±c hiá»‡n. Láº¥y vÃ­ dá»¥:\u003C\u002Fblockquote\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-js\"\u003E\u002F\u002F ÄÃ¢y khÃ´ng lÃ  tail recursion vÃ¬ sau khi gá»i Ä‘á»‡ quy\n\u002F\u002F fact(n-1) thÃ¬ hÃ m pháº£i thá»±c hiá»‡n thÃªm phÃ©p nhÃ¢n\n\u002F\u002F vá»›i n ná»¯a má»›i káº¿t thÃºc\nfunction fact(n) {\n    if (n === 1)\n        return 1\n    else\n        return n * fact(n-1)\n}\n\n\u002F\u002F ÄÃ¢y lÃ  tail recursion vÃ¬ chá»‰ cáº§n gá»i fact(n-1, acc*n)\n\u002F\u002F xong thÃ¬ hÃ m sáº½ káº¿t thÃºc\nfunction fact(n, acc) {\n    if (n === 1)\n        return acc\n    else\n        return fact(n-1, acc*n)\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EBáº¡n cÃ³ thá»ƒ tá»± tÃ¬m hiá»ƒu kÄ© hÆ¡n táº¡i sao khi Ä‘Æ°a vá» tail recursion thÃ¬ sáº½ tá»‘i Æ°u hÆ¡n, nhÆ°ng Ä‘á»ƒ nÃ³i sÆ¡ qua thÃ¬ bÃ¬nh thÆ°á»ng khi báº¡n gá»i Ä‘á»‡ quy, nhá»¯ng giÃ¡ trá»‹, Ã´ nhá»› cÃ¡c thá»© á»Ÿ hiá»‡n táº¡i sáº½ Ä‘Æ°á»£c Ä‘áº©y lÃªn call stack, cá»© má»—i láº§n gá»i Ä‘á»‡ quy lá»“ng nhau thÃ¬ call stack sáº½ cÃ ng ngÃ y cÃ ng cao lÃªn, bá»™ nhá»› phÃ¬nh to ra, cho Ä‘áº¿n khi vÆ°á»£t quÃ¡ call stack size thÃ¬ chÆ°Æ¡ng trÃ¬nh tráº£ vá» lá»—i stack overflow. Tail recursion thÃ¬ láº¡i khÃ¡c, vÃ¬ Ä‘á»‡ quy lÃ  cÃ¢u lá»‡nh Ä‘Æ°á»£c thá»±c hiá»‡n cuá»‘i cÃ¹ng nÃªn compiler sáº½ thoáº£i mÃ¡i giáº£i phÃ³ng stack hiá»‡n táº¡i vÃ¬ nÃ³ cháº¯c cháº¯n stack hiá»‡n táº¡i khÃ´ng cáº§n dÃ¹ng ná»¯a, nÃªn dÃ¹ cÃ³ gá»i Ä‘á»‡ quy vÃ´ háº¡n láº§n thÃ¬ cÅ©ng khÃ´ng lo bá»‹ stack overflow.\u003C\u002Fp\u003E\n\u003Cp\u003ETiáº¿p tá»¥c nhÃ©, bÃ¢y giá» Ä‘á»ƒ biáº¿n \u003Cspan class=\"math inline\"\u003E\\(\\operatorname{fib}(n)\\)\u003C\u002Fspan\u003E thÃ nh tail recursion, ta láº¥y phÆ°Æ¡ng trÃ¬nh \u003Cspan class=\"math inline\"\u003E\\((3)\\)\u003C\u002Fspan\u003E Ä‘em biáº¿n Ä‘á»•i thá»­, vÃ  chÃºng ta muá»‘n sau khi biáº¿n Ä‘á»•i xong thÃ¬ váº¿ pháº£i pháº£i cÃ³ dáº¡ng giá»‘ng na nÃ¡ váº¿ trÃ¡i, tá»« Ä‘Ã³ ta cÃ³ thá»ƒ Ä‘á»‹nh nghÄ©a má»™t hÃ m phá»¥ \u003Cspan class=\"math inline\"\u003E\\(F\\)\u003C\u002Fspan\u003E nÃ o Ä‘Ã³ sao cho váº¿ trÃ¡i vÃ  váº¿ pháº£i phá»¥ thuá»™c vÃ o nhau thÃ´ng qua \u003Cspan class=\"math inline\"\u003E\\(F\\)\u003C\u002Fspan\u003E, kiá»ƒu nhÆ° \u003Cspan class=\"math inline\"\u003E\\(F(2n) = F(3n-1)\\)\u003C\u002Fspan\u003E cháº³ng háº¡n. Rá»“i váº­y ta thá»­ cá»™ng \u003Cspan class=\"math inline\"\u003E\\(\\operatorname{fib}(n+1)\\)\u003C\u002Fspan\u003E vÃ o hai váº¿ xem sao:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cspan class=\"math display\"\u003E\\[\\operatorname{fib}(n+1) + \\operatorname{fib}(n+2) = \\operatorname{fib}(n) + 2\\cdot \\operatorname{fib}(n+1)\n\\]\u003C\u002Fspan\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EHai váº¿ khÃ¡ giá»‘ng nhau rá»“i Ä‘Ã³, \u003Cspan class=\"math inline\"\u003E\\(\\operatorname{fib}(n+1)\\)\u003C\u002Fspan\u003E (váº¿ trÃ¡i) tÆ°Æ¡ng á»©ng vá»›i \u003Cspan class=\"math inline\"\u003E\\(\\operatorname{fib}(n)\\)\u003C\u002Fspan\u003E (váº¿ pháº£i) lÃ  á»•n rá»“i nÃ¨, cÃ²n \u003Cspan class=\"math inline\"\u003E\\(\\operatorname{fib}(n+2)\\)\u003C\u002Fspan\u003E (váº¿ trÃ¡i) tÆ°Æ¡ng á»©ng vá»›i \u003Cspan class=\"math inline\"\u003E\\(\\operatorname{fib}(n+1)\\)\u003C\u002Fspan\u003E (váº¿ pháº£i) thÃ¬ váº«n chÆ°a á»•n vÃ¬ bá»‹ khÃ¡c há»‡ sá»‘, Ä‘á»ƒ kháº¯c phá»¥c chuyá»‡n nÃ y thÃ¬ ta sáº½ Ä‘Æ°a ra má»™t biáº¿n khÃ¡c, gá»i lÃ  biáº¿n \u003Cspan class=\"math inline\"\u003E\\(b\\)\u003C\u002Fspan\u003E Ä‘i. Giá» ta thá»­ cá»™ng \u003Cspan class=\"math inline\"\u003E\\((b-1)\\operatorname{fib}(n+2)\\)\u003C\u002Fspan\u003E vÃ o hai váº¿ xem sao (má»¥c Ä‘Ã­ch cá»™ng nhÆ° váº­y lÃ  Ä‘á»ƒ \u003Cspan class=\"math inline\"\u003E\\(\\operatorname{fib}(n+2)\\)\u003C\u002Fspan\u003E cÃ³ há»‡ sá»‘ lÃ  \u003Cspan class=\"math inline\"\u003E\\(b\\)\u003C\u002Fspan\u003E):\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cspan class=\"math display\"\u003E\\[\\operatorname{fib}(n+1) + b\\cdot \\operatorname{fib}(n+2) = b\\cdot \\operatorname{fib}(n) + (b+1)\\cdot \\operatorname{fib}(n+1)\n\\]\u003C\u002Fspan\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ETa nháº­n tháº¥y há»‡ sá»‘ cá»§a \u003Cspan class=\"math inline\"\u003E\\(\\operatorname{fib}(n+1)\\)\u003C\u002Fspan\u003E vÃ  \u003Cspan class=\"math inline\"\u003E\\(\\operatorname{fib}(n)\\)\u003C\u002Fspan\u003E chÆ°a giá»‘ng nhau (bÃªn lÃ  \u003Cspan class=\"math inline\"\u003E\\(1\\)\u003C\u002Fspan\u003E, bÃªn lÃ  \u003Cspan class=\"math inline\"\u003E\\(b\\)\u003C\u002Fspan\u003E), nÃªn lÃ  ta Ä‘Æ°a thÃªm biáº¿n \u003Cspan class=\"math inline\"\u003E\\(a\\)\u003C\u002Fspan\u003E vÃ o vÃ  lÃ m tÆ°Æ¡ng tá»±, ta Ä‘Æ°á»£c:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cspan class=\"math display\"\u003E\\[a\\cdot \\operatorname{fib}(n+1) + b\\cdot \\operatorname{fib}(n+2) = b\\cdot \\operatorname{fib}(n) + (a+b)\\cdot \\operatorname{fib}(n + 1)\\tag{4}\n\\]\u003C\u002Fspan\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ETuyá»‡t vá»i Ã´ng máº·t trá»i, hai bÃªn cÃ³ cÃ¹ng má»™t dáº¡ng rá»“i Ä‘Ã³, bÃ¢y giá» ta Ä‘á»‹nh nghÄ©a hÃ m phá»¥ \u003Cspan class=\"math inline\"\u003E\\(F\\)\u003C\u002Fspan\u003E nhÆ° sau:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cspan class=\"math display\"\u003E\\[F(a, b, n) = a\\cdot \\operatorname{fib}(n) + b\\cdot \\operatorname{fib}(n+1)\n\\]\u003C\u002Fspan\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ETá»« Ä‘Ã³ ta cÃ³ thá»ƒ biá»ƒu diá»…n hai váº¿ cá»§a \u003Cspan class=\"math inline\"\u003E\\((4)\\)\u003C\u002Fspan\u003E dÆ°á»›i dáº¡ng:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cspan class=\"math display\"\u003E\\[F(a, b, n+1) = F(b, a+b, n) \\tag{*}\n\\]\u003C\u002Fspan\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ENgoÃ i ra dá»±a vÃ o Ä‘á»‹nh nghÄ©a cá»§a \u003Cspan class=\"math inline\"\u003E\\(F\\)\u003C\u002Fspan\u003E, ta Ä‘Æ°á»£c:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cspan class=\"math display\"\u003E\\[F(a, b, 0) = a\\cdot \\operatorname{fib}(0) + b\\cdot \\operatorname{fib}(1) = a + b \\tag{5}\n\\]\u003C\u002Fspan\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EHÆ¡n ná»¯a:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cspan class=\"math display\"\u003E\\[\\operatorname{fib}(n) = 1\\cdot \\operatorname{fib}(n) + 0\\cdot \\operatorname{fib}(n+1) = F(1, 0, n) \\tag{6}\n\\]\u003C\u002Fspan\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ETa Ä‘Ã£ hoÃ n toÃ n cÃ³ Ä‘á»§ nguyÃªn liá»‡u Ä‘á»ƒ triá»ƒn khai thuáº­t toÃ¡n rá»“i Ä‘Ã³, Ä‘á»ƒ Ã½:\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Cspan class=\"math inline\"\u003E\\((6)\\)\u003C\u002Fspan\u003E cho ta Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a tá»•ng quÃ¡t cá»§a \u003Cspan class=\"math inline\"\u003E\\(\\operatorname{fib}(n)\\)\u003C\u002Fspan\u003E dá»±a trÃªn hÃ m phá»¥ \u003Cspan class=\"math inline\"\u003E\\(F\\)\u003C\u002Fspan\u003E.\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cspan class=\"math inline\"\u003E\\((*)\\)\u003C\u002Fspan\u003E cho ta cÃ´ng thá»©c Ä‘á»‡ quy cá»§a \u003Cspan class=\"math inline\"\u003E\\(F\\)\u003C\u002Fspan\u003E.\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cspan class=\"math inline\"\u003E\\((5)\\)\u003C\u002Fspan\u003E cho ta base case Ä‘á»‡ quy cá»§a \u003Cspan class=\"math inline\"\u003E\\(F\\)\u003C\u002Fspan\u003E.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003EHy vá»ng tá»›i Ä‘Ã¢y má»i thá»© make sense Ä‘Æ°á»£c vá»›i báº¡n, náº¿u lÃº thÃ¬ cÅ©ng khÃ´ng sao cá»© Ä‘á»c láº¡i nhÃ©, máº¥y láº§n Ä‘áº§u mÃ¬nh Ä‘á»c cÅ©ng lÃº ğŸ™‚ Giá» thÃ¬ code thÃ´i (2 code dÆ°á»›i nÃ y Ä‘á»u lÃ  cá»§a tÃ¡c giáº£ bÃ i toÃ¡n háº¿t nha, khÃ´ng pháº£i cá»§a tui):\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-python\"\u003Edef fib(n):\n\n    def F(a, b, n):\n        if n == 0: return a + b    # see (5) above\n        return F(b, a + b, n - 1)  # see (*) above\n\n    return F(1, 0, n)              # see (6) above\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ETá»›i Ä‘Ã¢y lÃ  \u003Cspan class=\"math inline\"\u003E\\(QED\\)\u003C\u002Fspan\u003E rá»“i, nhÆ°ng náº¿u ngÃ´n ngá»¯ báº¡n dÃ¹ng khÃ´ng há»— trá»£ tá»‘i Æ°u Ä‘á»‡ quy Ä‘uÃ´i (\u003Ca href=\"https:\u002F\u002Fstackoverflow.com\u002Fquestions\u002F310974\u002Fwhat-is-tail-call-optimization\"\u003Etail call optimization\u003C\u002Fa\u003E) thÃ¬ báº¡n cÃ³ thá»ƒ implement theo dáº¡ng khá»­ Ä‘á»‡ quy nhÆ° sau:\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-python\"\u003Edef fib(n):\n    a, b = 1, 0                    # see (6) above\n    while n &gt; 0:\n        a, b, n = b, a + b, n - 1  # see (*) above\n    return a + b .                 # see (5) above\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cblockquote\u003E\nÄÃ¢y lÃ  má»™t sá»©c máº¡nh khÃ¡c cá»§a tail recursion, má»™t khi báº¡n Ä‘Ã£ Ä‘Æ°a hÃ m vá» tail recursion rá»“i thÃ¬ viá»‡c khá»­ Ä‘á»‡ quy lÃ  vÃ´ cÃ¹ng Ä‘Æ¡n giáº£n.\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003ETuyá»‡t dá»i, lÃ m &ldquo;tÆ°Æ¡ng tá»±&rdquo; vá»›i hÃ m \u003Cspan class=\"math inline\"\u003E\\(\\operatorname{fusc}(n)\\)\u003C\u002Fspan\u003E thÃ´i nÃ o ğŸ˜‰. Náº¿u Ä‘á»c tá»›i Ä‘Ã¢y mÃ  báº¡n Ä‘Ã£ cÃ³ Ã½ tÆ°á»Ÿng, hoáº·c muá»‘n thá»­ sá»©c báº£n thÃ¢n thÃ¬ cÃ³ thá»ƒ pause láº¡i. Tháº­t ra theo tui thÃ¬ má»™t khi Ä‘Ã£ náº¯m Ä‘Æ°á»£c Ã½ tÆ°á»Ÿng cá»§a phÆ°Æ¡ng phÃ¡p nÃ y rá»“i thÃ¬ cÅ©ng khÃ´ng quÃ¡ khÃ³ Ä‘Ã¢u.\u003C\u002Fp\u003E\n\u003Ch2\u003EGiáº£i quyáº¿t bÃ i toÃ¡n\u003C\u002Fh2\u003E\n\u003Cp\u003ENháº¯c láº¡i Ä‘á»‹nh nghÄ©a cá»§a hÃ m \u003Cspan class=\"math inline\"\u003E\\(\\operatorname{fusc}(n)\\)\u003C\u002Fspan\u003E. Äá»ƒ cho \u003Cdel\u003EgÃµ Ä‘á»¡ má»i tay\u003C\u002Fdel\u003E Ä‘Æ¡n giáº£n thÃ¬ tui Ä‘áº·t hÃ m \u003Cspan class=\"math inline\"\u003E\\(\\operatorname{fusc}(n)\\)\u003C\u002Fspan\u003E lÃ  hÃ m \u003Cspan class=\"math inline\"\u003E\\(f(n)\\)\u003C\u002Fspan\u003E luÃ´n nhÃ©:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cspan class=\"math display\"\u003E\\[\\begin{cases}\nf(0) = 0 & (1)\\\\\nf(1) = 1 & (2)\\\\\nf(2n) = f(n) & (3)\\\\\nf(2n + 1) = f(n) + f(n + 1) & (4)\\\\\n\\end{cases}\n\\]\u003C\u002Fspan\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ETÆ°Æ¡ng tá»± nhÆ° vÃ­ dá»¥ trÃªn, tá»« Ä‘á»‹nh nghÄ©a ta sáº½ cá»‘ gáº¯ng tÃ¬m phÆ°Æ¡ng trÃ¬nh nÃ o Ä‘Ã³ sao cho hai váº¿ cÃ³ cÃ¹ng dáº¡ng, rá»“i tá»« Ä‘Ã³ Ä‘áº·t hÃ m phá»¥. Láº¥y \u003Cspan class=\"math inline\"\u003E\\((3)\\)\u003C\u002Fspan\u003E vÃ  \u003Cspan class=\"math inline\"\u003E\\((4)\\)\u003C\u002Fspan\u003E cá»™ng láº¡i vá»›i nhau thá»­ coi sao:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cspan class=\"math display\"\u003E\\[f(2n)+f(2n+1)=2f(n) + f(n+1)\n\\]\u003C\u002Fspan\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ETháº¥y hai váº¿ cÅ©ng na nÃ¡ giá»‘ng rá»“i nÃ¨, \u003Cspan class=\"math inline\"\u003E\\(f(2n)\\)\u003C\u002Fspan\u003E tÆ°Æ¡ng á»©ng vá»›i \u003Cspan class=\"math inline\"\u003E\\(f(n)\\)\u003C\u002Fspan\u003E vÃ  \u003Cspan class=\"math inline\"\u003E\\(f(2n+1)\\)\u003C\u002Fspan\u003E tÆ°Æ¡ng á»©ng vá»›i \u003Cspan class=\"math inline\"\u003E\\(f(n+1)\\)\u003C\u002Fspan\u003E. BÃ¢y giá» tÃ¬m cÃ¡ch cÃ¢n báº±ng há»‡ sá»‘ thÃ´i. Cá»¥ thá»ƒ, ta sáº½ Ä‘Æ°a biáº¿n \u003Cspan class=\"math inline\"\u003E\\(b\\)\u003C\u002Fspan\u003E vÃ o phÆ°Æ¡ng trÃ¬nh báº±ng cÃ¡ch cá»™ng \u003Cspan class=\"math inline\"\u003E\\((b-1)f(2n+1)\\)\u003C\u002Fspan\u003E hai váº¿, ta Ä‘Æ°á»£c:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cspan class=\"math display\"\u003E\\[f(2n)+bf(2n+1)=(b+1)f(n) + bf(n+1)\n\\]\u003C\u002Fspan\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ETÆ°Æ¡ng tá»±, Ä‘Æ°a biáº¿n \u003Cspan class=\"math inline\"\u003E\\(a\\)\u003C\u002Fspan\u003E vÃ o phÆ°Æ¡ng trÃ¬nh:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cspan class=\"math display\"\u003E\\[af(2n)+bf(2n+1)=(a+b)f(n) + bf(n+1) \\tag{5}\n\\]\u003C\u002Fspan\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EHai váº¿ Ä‘Ã£ cÃ¹ng dáº¡ng nhÆ° mÃ¬nh ao Æ°á»›c rá»“i Ä‘Ã³, giá» Ä‘á»‹nh nghÄ©a hÃ m phá»¥ \u003Cspan class=\"math inline\"\u003E\\(F\\)\u003C\u002Fspan\u003E thÃ´i:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cspan class=\"math display\"\u003E\\[F(a, b, n) = af(n) + bf(n+1)\n\\]\u003C\u002Fspan\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ETá»« Ä‘Ã³ ta biá»ƒu diá»…n \u003Cspan class=\"math inline\"\u003E\\((5)\\)\u003C\u002Fspan\u003E theo \u003Cspan class=\"math inline\"\u003E\\(F\\)\u003C\u002Fspan\u003E nhÆ° sau:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cspan class=\"math display\"\u003E\\[F(a,b,2n) = F(a+b,b,n) \\tag{*}\n\\]\u003C\u002Fspan\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ENgoÃ i ra tá»« Ä‘á»‹nh nghÄ©a cá»§a \u003Cspan class=\"math inline\"\u003E\\(F\\)\u003C\u002Fspan\u003E suy ra Ä‘Æ°á»£c:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cspan class=\"math display\"\u003E\\[F(a,b,0) = af(0) + bf(1) = b \\tag{6.1}\n\\]\u003C\u002Fspan\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EVÃ :\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cspan class=\"math display\"\u003E\\[F(a,b,1) = af(1) + bf(2) = a + b \\tag{6.2}\n\\]\u003C\u002Fspan\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EHÆ¡n ná»¯a:\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cspan class=\"math display\"\u003E\\[f(n) = 1f(n) + 0f(n+1) = F(1,0,n) \\tag{7}\n\\]\u003C\u002Fspan\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ENgá»«ng láº¡i má»™t chÃºt, tá»›i Ä‘Ã¢y ta váº«n chÆ°a thá»ƒ triá»ƒn khai thÃ nh thuáº­t toÃ¡n hoÃ n chá»‰nh Ä‘Æ°á»£c, táº¡i sao Æ°? Äá»ƒ Ã½ \u003Cspan class=\"math inline\"\u003E\\((*)\\)\u003C\u002Fspan\u003E chá»‰ Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a vá»›i \u003Cspan class=\"math inline\"\u003E\\(2n\\)\u003C\u002Fspan\u003E, tá»©c khi input lÃ  sá»‘ cháºµn, váº­y cÃ²n láº» thÃ¬ sao? ÄÆ¡n giáº£n thÃ´i, tháº¿ trÆ°á»ng há»£p input láº» vÃ o \u003Cspan class=\"math inline\"\u003E\\(F\\)\u003C\u002Fspan\u003E rá»“i biáº¿n Ä‘á»•i, tá»©c lÃ :\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cspan class=\"math display\"\u003E\\[\\begin{align*}\nF(a,b,2n+1)\n&= af(2n+1) + bf(n+1)\\\\\n&= a[f(n) + f(n+1)] + bf(n+1)\\\\\n&= af(n) + (a+b)f(n+1)\\\\\n&= F(a,a+b,n) \\tag{**}\n\\end{align*}\n\\]\u003C\u002Fspan\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ETa tá»•ng há»£p láº¡i Ä‘Æ°á»£c nhÆ° sau:\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Cspan class=\"math inline\"\u003E\\((7)\\)\u003C\u002Fspan\u003E cho ta Ä‘á»‹nh nghÄ©a tá»•ng quÃ¡t cá»§a \u003Cspan class=\"math inline\"\u003E\\(f(n)\\)\u003C\u002Fspan\u003E dá»±a trÃªn \u003Cspan class=\"math inline\"\u003E\\(F\\)\u003C\u002Fspan\u003E.\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cspan class=\"math inline\"\u003E\\((*)\\)\u003C\u002Fspan\u003E cho ta cÃ´ng thá»©c Ä‘á»‡ quy cá»§a \u003Cspan class=\"math inline\"\u003E\\(F\\)\u003C\u002Fspan\u003E Ä‘á»‘i vá»›i trÆ°á»ng há»£p input cháºµn, tÆ°Æ¡ng tá»± vá»›i \u003Cspan class=\"math inline\"\u003E\\((**)\\)\u003C\u002Fspan\u003E á»Ÿ trÆ°á»ng há»£p input láº».\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cspan class=\"math inline\"\u003E\\((6.1)\\)\u003C\u002Fspan\u003E vÃ  \u003Cspan class=\"math inline\"\u003E\\((6.2)\\)\u003C\u002Fspan\u003E cho ta base case Ä‘á»‡ quy cá»§a \u003Cspan class=\"math inline\"\u003E\\(F\\)\u003C\u002Fspan\u003E.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003ECode thoai:\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-js\"\u003Efunction fusc(n) {\n\n    function F(a, b, k) {\n        if (k === 0)  \u002F\u002F See (6.1)\n            return b\n        else if (k === 1)  \u002F\u002F See (6.2)\n            return a + b\n        else if (k % 2 === 0)  \u002F\u002F See (*)\n            return F(a+b, b, Math.round(k \u002F 2))\n        else  \u002F\u002F See (**)\n            return F(a, a+b, Math.round((k-1) \u002F 2))\n    }\n\n    return F(1, 0, n)  \u002F\u002F See (7)\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ESubmit thá»­:\u003Cbr\u003E\n\u003Cimg src=\"https:\u002F\u002Fi.imgur.com\u002FyoKDKTn.png\" alt=\"submit-code-img\"\u003E\u003Cbr\u003E\nNgon lÃ nh chá»© háº£, bonus cho máº¥y báº¡n thÃªm code Haskell nÃ¨:\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-haskell\"\u003Efusc :: Integer -&gt; Integer\nfusc n = aux 1 0 n\n  where\n    aux _ b 0 = b\n    aux a b 1 = a+b\n    aux a b n\n      | even n = aux (a+b) b (n `div` 2)\n      | otherwise = aux a (a+b) ((n-1) `div` 2)\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ETui biáº¿t cÃ³ má»™t sá»‘ báº¡n Ä‘á»c tá»›i Ä‘Ã¢y rá»“i thÃ¬ ngá»©a láº¯m, cÃ³ thá»ƒ báº¡n sáº½ tháº¯c máº¯c táº¡i sao khÃ´ng dÃ¹ng quy hoáº¡ch Ä‘á»™ng? ThÃ¬ Ä‘áº§u tiÃªn lÃ  tui Ä‘ang muá»‘n nháº¥n máº¡nh vá» phÆ°Æ¡ng phÃ¡p nÃ y, nÃªn quy hoáº¡ch Ä‘á»™ng khÃ´ng náº±m trong khuÃ´n khá»• cá»§a bÃ i viáº¿t. Thá»© 2 lÃ  quy hoáº¡ch Ä‘á»™ng tháº­t ra cÅ©ng khÃ´ng hiá»‡u quáº£ báº±ng Ä‘Ã¢u, tui cÅ©ng cÃ³ thá»­ implement quy hoáº¡ch Ä‘á»™ng xong submit thá»­ rá»“i nhÆ°ng nÃ³ tá»‘n quÃ¡ nhiá»u bá»™ nhá»›, codewars khÃ´ng accept (ngÆ°á»i ta tÃ­nh háº¿t rá»“i ^^).\u003C\u002Fp\u003E\n\u003Ch2\u003EGÃ³c nhÃ¬n cá»§a tui vá» phÆ°Æ¡ng phÃ¡p nÃ y\u003C\u002Fh2\u003E\n\u003Cp\u003ETrong pure functional programming language (FP) nhÆ° Haskell thÃ¬ khÃ´ng cÃ³ vÃ²ng láº·p cho báº¡n dÃ¹ng, thay vÃ o Ä‘Ã³ náº¿u báº¡n muá»‘n láº·p thÃ¬ báº¡n pháº£i xÃ¢y dá»±ng Ä‘á»‡ quy. MÃ  thá»±c táº¿ cÃ³ nhá»¯ng tÃ­nh nÄƒng báº¡n cáº§n láº·p vÃ´ háº¡n hoáº·c láº·p ráº¥t nhiá»u láº§n, Ä‘á»ƒ khÃ´ng bá»‹ stack overflow trÃªn nhá»¯ng tÃ­nh nÄƒng Ä‘Ã³ thÃ¬ há» pháº£i hÆ°á»›ng tá»›i tail recursion. Váº­y lÃ m sao Ä‘á»ƒ xÃ¢y dá»±ng tail recursion? á»«a thÃ¬ linh cáº£m, tÃ¢m linh lÃ  chÃ­nh thÃ´i, láº¥y vÃ­ dá»¥ cho hÃ m tÃ­nh giai thá»«a:\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-js\"\u003E\u002F\u002F Äá»‡ quy thÃ´ng thÆ°á»ng\nfunction fact(n) {\n    if (n === 1)\n        return 1\n    else\n        return n * fact(n-1)\n}\n\n\u002F\u002F Tail recursion\nfunction fact(n, acc) {\n    if (n === 1)\n        return acc\n    else\n        return fact(n-1, acc*n)\n}\nfact(10, 1) \u002F\u002F tÃ­nh 10!\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EHÃ m Ä‘á»‡ quy thÃ´ng thÆ°á»ng thÃ¬ Ä‘Æ¡n giáº£n rá»“i mÃ¬nh sáº½ khÃ´ng nháº¯c tá»›i nhÃ©. CÃ²n pháº§n tail recursion á»Ÿ dÆ°á»›i mÃ¬nh cÃ³ thá»ƒ hiá»ƒu lÃ  ta cáº§n 1 biáº¿n nhÃ¢n dá»“n káº¿t quáº£ láº¡i, gá»i lÃ  \u003Ccode\u003Eacc\u003C\u002Fcode\u003E (accumulator). \u003Ccode\u003Eacc\u003C\u002Fcode\u003E cÃ³ giÃ¡ trá»‹ ban Ä‘áº§u lÃ  1, má»—i láº§n gá»i Ä‘á»‡ quy thÃ¬ ta nhÃ¢n \u003Ccode\u003En\u003C\u002Fcode\u003E vÃ´ \u003Ccode\u003Eacc\u003C\u002Fcode\u003E, Ä‘á»“ng thá»i giáº£m \u003Ccode\u003En\u003C\u002Fcode\u003E xuá»‘ng má»™t Ä‘Æ¡n vá»‹, rá»“i truyá»n vÃ o Ä‘á»‡ quy káº¿ tiáº¿p. Cá»© truyá»n xuá»‘ng nhÆ° váº­y, lÃºc nÃ y báº¡n sáº½ tháº¥y \u003Ccode\u003Eacc\u003C\u002Fcode\u003E mang giÃ¡ trá»‹ cá»§a tÃ­ch \u003Ccode\u003En(n-1)(n-2)...\u003C\u002Fcode\u003E vÃ  cÅ©ng lÃ  káº¿t quáº£ mÃ¬nh cáº§n tÃ¬m khi \u003Ccode\u003En\u003C\u002Fcode\u003E giáº£m xuá»‘ng 1.\u003C\u002Fp\u003E\n\u003Cp\u003EÄÃ¢y cÅ©ng lÃ  pattern chung trong phÆ°Æ¡ng phÃ¡p tÃ¬m tail recursion, ta sáº½ cÃ³ biáº¿n tÃ­ch luá»¹ \u003Ccode\u003Eacc\u003C\u002Fcode\u003E lÃ  tham sá»‘ Ä‘Æ°á»£c truyá»n dáº§n xuá»‘ng, vÃ  nÃ³ sáº½ Ä‘em theo káº¿t quáº£ cho Ä‘áº¿n khi cháº¡m base case. NhÆ°ng ta cÃ³ thá»ƒ tháº¥y pattern trÃªn chá»‰ do mÃ¬nh cáº£m giÃ¡c vÃ  tÆ°á»Ÿng tÆ°á»£ng (aka tÃ¢m linh) chá»© khÃ´ng Ä‘Æ°á»£c chá»©ng minh rÃµ rÃ ng, vÃ  ban Ä‘áº§u mÃ¬nh cÅ©ng nghÄ© máº¥y thá»© nÃ y khÃ´ng thá»ƒ chá»©ng minh Ä‘Æ°á»£c cho Ä‘áº¿n khi gáº·p bÃ i toÃ¡n xá»‹n xÃ² mÃ  mÃ¬nh Ä‘Ã£ giáº£i quyáº¿t bÃªn trÃªn.\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\nGÃ³c bÃ i táº­p vá» nhÃ : Báº¡n cÃ³ thá»ƒ thá»­ suy nghÄ© cÃ¡ch chá»©ng minh Ä‘á»‹nh nghÄ©a hÃ m fact(n, acc) bÃªn trÃªn lÃ  Ä‘Ãºng dá»±a trÃªn phÆ°Æ¡ng phÃ¡p cháº·t cháº½ cá»§a bÃ i viáº¿t. VÃ  xÃ¢y dá»±ng láº¡i tail recursion cho fib(n) dá»±a trÃªn phÆ°Æ¡ng phÃ¡p tÃ¢m linh nÃ y, báº¡n sáº½ báº¥t ngá» vÃ¬ nÃ³ cho cÃ¹ng má»™t káº¿t quáº£ Ä‘Ã³.\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003ECáº£m Æ¡n máº¥y báº¡n Ä‘Ã£ Ä‘á»c háº¿t Ä‘áº¿n Ä‘Ã¢y (hoáº·c lÃ  do báº¡n lÆ°á»›t xuá»‘ng vÃ  gáº·p Ä‘Æ°á»£c dÃ²ng nÃ y). ÄÃ¢y lÃ  bÃ i viáº¿t Ä‘áº§u tiÃªn trÃªn blog cá»§a tui, tui xin nháº­n má»i Ã½ kiáº¿n Ä‘Ã³ng gÃ³p, nhÆ°ng náº¿u báº¡n cÃ³ Ã½ Ä‘á»‹nh nÃ©m Ä‘Ã¡ thÃ¬ nÃªn cÃ¢n nháº¯c lá»i láº½ phÃ¹ há»£p vá»›i trÃ¡i tim má»ng manh cá»§a tÃ¡c giáº£ ğŸ˜¢.\u003C\u002Fp\u003E\n",Array(3),0,10,3221225527,"2021-09-01T20:31:32Z")));