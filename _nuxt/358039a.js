(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{137:function(e,t,n){"use strict";var r=n(20),o=(n(14),n(29),n(188),n(1));Object.entries({}).forEach((function(e){var t=Object(r.a)(e,2),n=t[0],component=t[1];o.a.component(n,component)}))},138:function(e,t,n){"use strict";var r=n(1),o=n(211);t.a=function(e){var t={clientId:e.$config.GOOGLE_CLIENT_ID,scope:"profile email openid",prompt:"select_account"};r.a.use(o.a,t)}},198:function(e,t,n){e.exports={}},214:function(e,t,n){"use strict";var r={mounted:function(){this.goodgleAnalytics()},methods:{goodgleAnalytics:function(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-SH612LCBTQ")}}},o=r,c=(n(278),n(53)),component=Object(c.a)(o,(function(){var e=this._self._c;return e("div",[e("Nuxt")],1)}),[],!1,null,null,null);t.a=component.exports},223:function(e,t,n){n(224),e.exports=n(225)},278:function(e,t,n){"use strict";n(198)},279:function(e,t,n){"use strict";n.r(t),n.d(t,"state",(function(){return r})),n.d(t,"mutations",(function(){return o}));var r=function(){return{tags:[]}},o={setTags:function(e,t){e.tags=t}}},280:function(e,t,n){"use strict";n.r(t),n.d(t,"state",(function(){return c})),n.d(t,"mutations",(function(){return m})),n.d(t,"actions",(function(){return f}));var r=n(210),o=n(3),c=(n(45),n(26),n(21),n(55),n(48),n(192),n(87),function(){return{name:"",avatar:"",email:"",profileUrl:"",logined:!1}}),m={setLogin:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.logined=t},setUserInfo:function(e,t){var n=t.userInfo,r=t.loginType;"google"===r?(e.name=n.name,e.avatar=n.picture,e.email=n.email):"github"===r&&(e.name=n.name,e.avatar=n.avatar_url,e.email=n.email,e.profileUrl=n.html_url)}},f={login:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var n,r,o,c,m,f,l,d,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,r=e.commit,o=e.dispatch,c=localStorage.getItem("accessToken"),m=localStorage.getItem("loginType"),!n.logined){t.next=5;break}return t.abrupt("return");case 5:if("google"!==m){t.next=19;break}return t.prev=6,t.next=9,o("fetchGoogleUserInfo",c);case 9:f=t.sent,r("setUserInfo",{userInfo:f,loginType:m}),r("setLogin"),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(6),401===(null===(l=t.t0.response)||void 0===l?void 0:l.status)&&o("logout");case 17:t.next=31;break;case 19:if("github"!==m){t.next=31;break}return t.prev=20,t.next=23,o("fetchGithubUserInfo",c);case 23:d=t.sent,r("setUserInfo",{userInfo:d,loginType:m}),r("setLogin"),t.next=31;break;case 28:t.prev=28,t.t1=t.catch(20),401===(null===(h=t.t1.response)||void 0===h?void 0:h.status)&&o("logout");case 31:case"end":return t.stop()}}),t,null,[[6,14],[20,28]])})))()},logout:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(r=e.commit)("setUserInfo",{name:"",avatar:"",email:""}),r("setLogin",!1),localStorage.removeItem("accessToken"),localStorage.removeItem("loginType"),n.next=7,t._vm.$gAuth.signOut();case 7:console.log("Signed out");case 8:case"end":return n.stop()}}),n)})))()},loginGoogle:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r,c,m;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=e.commit,c=e.dispatch,m="https://accounts.google.com/o/oauth2/auth",m+="?scope=https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email",m+="&client_id=".concat(t.$config.GOOGLE_CLIENT_ID),m+="&redirect_uri=".concat(window.location.origin),d(m+="&response_type=token",function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h(t,"access_token"),e.next=3,c("fetchGoogleUserInfo",n);case 3:o=e.sent,r("setUserInfo",{userInfo:o,loginType:"google"}),r("setLogin"),localStorage.setItem("loginType","google"),c("saveAccessToken",n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:case"end":return n.stop()}}),n)})))()},loginGithub:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r,c,m;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=e.commit,c=e.dispatch,m="https://github.com/login/oauth/authorize?",m+="client_id=".concat(t.$config.GITHUB_CLIENT_ID),m+="&redirect_uri=".concat(window.location.origin,"&scope=user"),d(m,function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(n){var code,o,m,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return code=l(n),e.next=3,t.$axios.post("/auth/github",{code:code});case 3:return o=e.sent,m=o.data,e.next=7,c("fetchGithubUserInfo",m.access_token);case 7:f=e.sent,r("setUserInfo",{userInfo:f,loginType:"github"}),r("setLogin"),localStorage.setItem("loginType","github"),c("saveAccessToken",m.access_token);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return n.stop()}}),n)})))()},fetchGithubUserInfo:function(e,t){var n=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.github.com/user",e.next=3,n.$axios.get("https://api.github.com/user",{headers:{Authorization:"Bearer ".concat(t)}});case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})))()},fetchGoogleUserInfo:function(e,t){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var c,m;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return Object(r.a)(e),c="https://www.googleapis.com/oauth2/v1/userinfo?access_token=".concat(t),o.next=4,n.$axios.get(c);case 4:return m=o.sent,o.abrupt("return",m.data);case 6:case"end":return o.stop()}}),o)})))()},saveAccessToken:function(e,t){localStorage.setItem("accessToken",t)}},l=function(e){var t=/\?.*=(.*)/gm.exec(e);return t&&t[1]?t[1]:""},d=function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t,n){var r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=window.open(t,"Authentication","width=550, height=650 left=100 top=50"),c=window.setInterval(Object(o.a)(regeneratorRuntime.mark((function e(){var t,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r.document){e.next=3;break}return e.abrupt("return",window.clearInterval(c));case 3:t=r.document.URL,o=window.location.origin,-1!=t.indexOf(o)&&(window.clearInterval(c),r.close(),n(t)),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])}))),300);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),h=function(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\#&]"+t+"=([^&#]*)").exec(e);return null==n?"":n[1]}},281:function(e,t,n){"use strict";n.r(t),n.d(t,"state",(function(){return h})),n.d(t,"mutations",(function(){return v})),n.d(t,"actions",(function(){return x}));n(49),n(14),n(26),n(46),n(32),n(21),n(31),n(47),n(51),n(33),n(38),n(40),n(56),n(29),n(57);var r=n(3),o=n(25),c=n(90);n(45),n(71),n(193),n(52),n(282),n(221);function m(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function f(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,m=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){m=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(m)throw o}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var h=function(){return{comments:[],replyingIndex:-1,replyingCommentID:0,recaptcha:null}},v={addComment:function(e,t){e.comments=[t].concat(Object(c.a)(e.comments))},setComments:function(e,t){e.comments=t},addCommentAtIndex:function(e,t){var n=t.index,r=t.comment;e.comments.splice(n,0,r)},removeCommentAtIndex:function(e,t){e.comments.splice(t,1)},changeReplyingIndex:function(e,t){e.replyingIndex=t},changeReplyingCommentID:function(e,t){e.replyingCommentID=t},setRecaptcha:function(e,t){e.recaptcha=t}},x={addCommentsfromRequest:function(e,t){var n,r=e.commit,o=[],c=l(t);try{var m=function(){var e=n.value;if(o.push(e),e.replies){var t=e.replies.map((function(t){return f(f({},t),{},{reply_comment_id:e.id})}));o=o.concat(t)}};for(c.s();!(n=c.n()).done;)m()}catch(e){c.e(e)}finally{c.f()}r("setComments",o)},addCommentAtID:function(e,t){var n=e.state,r=e.commit,o=t.postID,c=t.comment;r("addCommentAtIndex",{index:n.comments.findIndex((function(e){return e.id===o})),comment:c})},addReplyInput:function(e,t){return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o,i,c,m,f;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.state,o=e.commit,-1==r.replyingIndex){n.next=5;break}return n.next=4,o("removeCommentAtIndex",r.replyingIndex);case 4:t>r.replyingIndex&&t--;case 5:i=t;case 6:if(!(i<r.comments.length)){n.next=18;break}if(c=r.comments[i],m=r.comments[i+1],i!==r.comments.length-1&&null!=m&&m.reply_comment_id){n.next=15;break}return o("addCommentAtIndex",{index:i+1,comment:{id:"reply_input_".concat(c.id),isInput:!0,replyCommentID:c.id}}),f=r.comments[t].reply_comment_id||r.comments[t].id,o("changeReplyingCommentID",f),o("changeReplyingIndex",i+1),n.abrupt("break",18);case 15:i++,n.next=6;break;case 18:case"end":return n.stop()}}),n)})))()},submitComment:function(e,t){var n=this;return Object(r.a)(regeneratorRuntime.mark((function o(){var c,m,l,d,content;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(c=e.commit,m=e.rootState,l=e.state,d=t.isReply,""!==(content=(content=t.content).trim())){o.next=5;break}return o.abrupt("return",null);case 5:l.recaptcha.execute("comment").then(function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t){var r,body,path,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(body={content:content,access_token:localStorage.getItem("accessToken"),login_type:localStorage.getItem("loginType"),recaptcha_token:t},!d){e.next=10;break}return path="/comments/".concat(m.post.data.id,"/reply/").concat(l.replyingCommentID),e.next=5,n.$axios.$post(path,body);case 5:r=e.sent,c("addCommentAtIndex",{index:l.replyingIndex,comment:f(f({},r),{},{reply_comment_id:l.replyingCommentID})}),c("changeReplyingIndex",l.replyingIndex+1),e.next=15;break;case 10:return o="/comments/".concat(m.post.data.id),e.next=13,n.$axios.$post(o,body);case 13:r=e.sent,c("addComment",r);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:case"end":return o.stop()}}),o)})))()}}},284:function(e,t,n){"use strict";n.r(t),n.d(t,"state",(function(){return r})),n.d(t,"mutations",(function(){return o}));var r=function(){return{data:{}}},o={setPost:function(e,t){e.data=t}}}},[[223,32,5,33]]]);