import{c as G,a as U,t as me}from"./DX7Grmzp.js";import{p as Q,aB as he,al as b,d as _,an as M,a9 as I,g as n,aC as pe,am as re,f as H,a as W,aD as ve,v as Z,aE as $,c as ge,r as xe,aa as q,aF as _e,t as ye}from"./g0HKWCZd.js";import{e as Ce}from"./BntSvHci.js";import{s as be}from"./DF4yiWGH.js";import{P as ee,s as Ee,a as oe,S as te,i as we,m as ke,b as ne}from"./DcRbHnYY.js";import{b as Pe}from"./Bk14xdPL.js";import{s as Ie}from"./DA6iSUxa.js";import{p as Oe}from"./BOpPzQmY.js";import{p as i,a as Le,b as Me}from"./pIfFs6sh.js";import{c as Re}from"./C9B-BX1y.js";import"./BjlpqrTy.js";import{e as Ve}from"./DZfohXkh.js";import{i as le}from"./tWk0kTU-.js";import{b as ze}from"./CaUiJ1m3.js";let ie=0;function Ae(){const e=ie;return ie++,e}function Se(){return new Map}function Be(e,t){Q(t,!1);const E=M();let d=i(t,"isPresent",8),h=i(t,"onExitComplete",8,void 0),w=i(t,"initial",8),g=i(t,"custom",8,void 0),s=i(t,"presenceAffectsLayout",8),y=i(t,"isCustom",8);const l=new Se,C=Ae(),r=()=>({id:C,initial:w(),isPresent:d(),custom:g(),onExitComplete:p=>{var c;l.set(p,!0);let v=!0;l.forEach(u=>{u||(v=!1)}),v&&((c=h())==null||c())},register:p=>(l.set(p,!1),()=>l.delete(p))});let o=ee();ze(()=>{s()&&o.set(r())});const V=()=>{l.forEach((p,v)=>l.set(v,!1))};he(ee,o),Ee("Presence",y(),o),b(()=>(I(s()),I(d())),()=>{_(E,s()?void 0:d())}),b(()=>n(E),()=>{o.set(r(n(E)))}),b(()=>I(d()),()=>{V(d())}),b(()=>(I(d()),I(h())),()=>{pe().then(()=>{var p;!d()&&!l.size&&((p=h())==null||p())})}),re(),le();var R=G(),x=H(R);oe(x,t,"default",{}),U(e,R),W()}function De(e,t){Q(t,!1);const[E,d]=Me(),h=()=>Le(p,"$layoutContext",E),w=M(),g=M();let s=i(t,"list",8,void 0),y=i(t,"custom",8,void 0),l=i(t,"initial",8,!0),C=i(t,"onExitComplete",8,void 0),r=i(t,"exitBeforeEnter",8,void 0),o=i(t,"presenceAffectsLayout",8,!0),V=i(t,"show",8,void 0),R=i(t,"isCustom",8,!1),x=M(s()!==void 0?s():V()?[{key:1}]:[]);const p=ve(te)||te(R());function v(f){return f.key||""}let c=M(!0),u=M(n(x)),m=M(n(u)),O=new Map,z=new Set;const fe=(f,k)=>{f.forEach(S=>{const a=v(S);k.set(a,S)})};let A=M([...n(u).map(f=>({present:!0,item:f,key:f.key}))]);b(()=>(I(s()),I(V())),()=>{_(x,s()!==void 0?s():V()?[{key:1}]:[])}),b(()=>h(),()=>{_(w,we(h()))}),b(()=>(n(w),h(),n(x)),()=>{_(g,()=>{n(w)&&h().forceUpdate(),_(x,[...n(x)])})}),b(()=>n(x),()=>{_(u,n(x))}),b(()=>n(u),()=>{fe(n(u),O)}),b(()=>(n(c),n(A),n(u),n(m),I(r()),n(g),I(C())),()=>{if(n(c))_(c,!1);else{_(A,[...n(u).map(a=>({present:!0,item:a,key:a.key}))]);const f=n(m).map(v),k=n(u).map(v),S=f.length;for(let a=0;a<S;a++){const P=f[a];k.indexOf(P)===-1?z.add(P):z.delete(P)}r()&&z.size&&_(A,[]),z.forEach(a=>{if(k.indexOf(a)!==-1)return;const P=O.get(a);if(!P)return;const Y=f.indexOf(a),B=()=>{O.delete(a),z.delete(a);const D=n(m).findIndex(ue=>ue.key===a);D<0||(n(m).splice(D,1),z.size||(_(m,[...n(u)]),n(g)(),C()&&C()()))};n(A).splice(Y,0,{present:!1,item:P,key:v(P),onExit:B})}),_(m,n(A))}}),re(),le();var X=G(),de=H(X);Ve(de,1,()=>n(A),f=>v(f),(f,k)=>{const S=Z(()=>l()?void 0:!1),a=Z(()=>n(k).onExit?y():void 0);Be(f,{get isPresent(){return n(k).present},get initial(){return n(S)},get custom(){return n(a)},get presenceAffectsLayout(){return o()},get onExitComplete(){return n(k).onExit},get isCustom(){return R()},children:(P,Y)=>{var B=G(),D=H(B);oe(D,t,"default",{get item(){return n(k).item}}),U(P,B)},$$slots:{default:!0}})}),U(e,X),W(),d()}function Ke(e){return e()}function je(e){e.forEach(Ke)}const K=[],se=[],F=[],ae=[],ce=Promise.resolve();let J=!1;function Fe(){J||(J=!0,ce.then(Ne))}function Ue(){return Fe(),ce}function qe(e){F.push(e)}const N=new Set;let j=0;function Ne(){do{for(;j<K.length;){const e=K[j];j++,Te(e.$$)}for(K.length=0,j=0;se.length;)se.pop()();for(let e=0;e<F.length;e+=1){const t=F[e];N.has(t)||(N.add(t),t())}F.length=0}while(K.length);for(;ae.length;)ae.pop()();J=!1,N.clear()}function Te(e){if(e.fragment!==null){e.update(),je(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(qe)}}const Ge={root:null,rootMargin:"0px",threshold:0,unobserveOnEnter:!1},L=(e,t)=>new CustomEvent(e,{detail:t});function T(e,t={}){const{root:E,rootMargin:d,threshold:h,unobserveOnEnter:w}=Object.assign(Object.assign({},Ge),t);let g={x:void 0,y:void 0},s={vertical:void 0,horizontal:void 0};if(typeof IntersectionObserver<"u"&&e){const y=new IntersectionObserver((l,C)=>{l.forEach(r=>{g.y>r.boundingClientRect.y?s.vertical="up":s.vertical="down",g.x>r.boundingClientRect.x?s.horizontal="left":s.horizontal="right",g={y:r.boundingClientRect.y,x:r.boundingClientRect.x};const o={inView:r.isIntersecting,entry:r,scrollDirection:s,node:e,observer:C};e.dispatchEvent(L("inview_change",o)),e.dispatchEvent(L("change",o)),r.isIntersecting?(e.dispatchEvent(L("inview_enter",o)),e.dispatchEvent(L("enter",o)),w&&C.unobserve(e)):(e.dispatchEvent(L("inview_leave",o)),e.dispatchEvent(L("leave",o)))})},{root:E,rootMargin:d,threshold:h});return Ue().then(()=>{e.dispatchEvent(L("inview_init",{observer:y,node:e})),e.dispatchEvent(L("init",{observer:y,node:e}))}),y.observe(e),{destroy(){y.unobserve(e)}}}}var He=me("<div><!></div>");function ot(e,t){Q(t,!0);const E=i(t,"duration",3,.4),d=i(t,"delay",3,0),h=i(t,"yOffset",3,40),w=i(t,"inViewMargin",3,"-50px"),g=i(t,"blur",3,"5px"),s=i(t,"once",3,!0),y=i(t,"class",3,"");let l=Oe({isInView:"hidden"});const C={hidden:{opacity:0,y:h(),filter:`blur(${g()})`},visible:{opacity:1,y:0,filter:"blur(0px)"}},r=q(()=>[{key:t.id}]);De(e,{get list(){return n(r)},children:$,$$slots:{default:(o,V)=>{const R=q(()=>({delay:.04+d(),duration:E(),ease:"easeOut"}));ke(o,{initial:"hidden",get animate(){return l.isInView},exit:"hidden",variants:C,get transition(){return n(R)},children:$,$$slots:{default:(x,p)=>{const v=q(()=>p.motion);var c=He(),u=ge(c);be(u,()=>t.children),xe(c),ne(c,(m,O)=>T==null?void 0:T(m,O),()=>({rootMargin:w(),unobserveOnEnter:s()})),ne(c,m=>{var O;return(O=n(v))==null?void 0:O(m)}),_e(()=>Ce("inview_change",c,({detail:m})=>{l.isInView="visible"})),ye(m=>Ie(c,Pe(m)),[()=>Re(y())]),U(x,c)}}})}}}),W()}export{ot as I};
